<form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="userType">Role:</label>
    <select id="userType" formControlName="userType" class="form-control my-2">
      <option value="" disabled>Select Role</option>
      <option *ngFor="let type of userTypes" [value]="type">
        {{ type }}
      </option>
    </select>
    <div *ngIf="getError('userType', 'required')" class="text-danger">
      User Type is required.
    </div>
  </div>

  <div class="form-group">
    <label for="name">Name:</label>
    <input
      type="text"
      id="name"
      formControlName="name"
      class="form-control my-2"
    />
    <div *ngIf="getError('name', 'required')" class="text-danger">
      Name is required.
    </div>
  </div>

  <div class="form-group">
    <label for="email">Email:</label>
    <input
      type="email"
      id="email"
      formControlName="email"
      class="form-control my-2"
    />
    <div *ngIf="getError('email', 'required')" class="text-danger">
      Email is required.
    </div>
    <div *ngIf="getError('email', 'email')" class="text-danger">
      Enter a valid email.
    </div>
  </div>

  <div class="form-group">
    <label for="password">Password:</label>
    <input
      type="password"
      id="password"
      formControlName="password"
      class="form-control my-2"
    />
    <div *ngIf="getError('password', 'required')" class="text-danger">
      Password is required.
    </div>
    <div *ngIf="getError('password', 'minlength')" class="text-danger">
      Password must be at least 6 characters long.
    </div>
  </div>

  <div class="form-group">
    <label for="confirmPassword">Confirm Password:</label>
    <input
      type="password"
      id="confirmPassword"
      formControlName="confirmPassword"
      class="form-control my-2"
    />
    <div *ngIf="getError('confirmPassword', 'required')" class="text-danger">
      Confirm Password is required.
    </div>
    <div
      *ngIf="getError('confirmPassword', 'passwordMismatch')"
      class="text-danger"
    >
      Passwords must match.
    </div>
  </div>
  <ng-container
    *ngIf="
      getControl('userType')?.value === USER_TYPE.EMPLOYER;
      else freelancer
    "
  >
    <div class="form-group">
      <label for="companyName">Company Name:</label>
      <input
        type="text"
        id="companyName"
        formControlName="companyName"
        class="form-control my-2"
      />
      <div *ngIf="getError('companyName', 'required')" class="text-danger">
        Name is required.
      </div>
    </div>
  </ng-container>
  <ng-template #freelancer>
    <div class="form-group my-2">
      <label for="skills">Skills:</label>
      <ng-select
        id="skills"
        [items]="skills"
        bindLabel="name"
        formControlName="skills"
        [multiple]="true"
        placeholder="Select skills"
        [searchable]="true"
        [clearable]="true"
        [addTag]="true"
        (add)="addSkill($event)"
      >
      </ng-select>
      <div *ngIf="getError('skills', 'required')" class="text-danger">
        Skills are required.
      </div>
    </div>

    <div class="form-group">
      <label for="githubUsername">GitHub Username</label>
      <input
        id="githubUsername"
        formControlName="githubUsername"
        type="text"
        class="form-control my-2"
        placeholder="Enter GitHub username"
      />

      <div *ngIf="getError('githubUsername', 'required')" class="text-danger">
        GitHub username is required.
      </div>
      <div *ngIf="isValidGithubUsername" class="text-danger">
        The GitHub username does not exist.
      </div>
    </div>
  </ng-template>
  <div
    [ngClass]="
      isEdit
        ? 'mt-2 d-flex justify-content-center'
        : 'mt-2 d-flex justify-content-between'
    "
  >
    <a
      *ngIf="!isEdit"
      href="login"
      class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
      >login</a
    >

    <button
      type="submit"
      class="btn btn-primary my-2"
      [disabled]="signupForm.invalid || isLoading"
    >
      {{ isLoading ? "Submiting ..." : "Submit" }}
    </button>
  </div>
</form>
